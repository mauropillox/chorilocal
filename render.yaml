services:
  - type: web
    name: chorilocal-backend
    env: docker
    region: oregon
    plan: hobby
    dockerfilePath: ./backend/Dockerfile
    dockerContext: ./backend
    # Persistent disk for database storage
    disk:
      name: database
      mountPath: /data
      sizeGB: 1
    # CRITICAL: Disable Render's auto-deploy to save $30/month
    # Deploy manually only when needed (or via GitHub Actions webhook)
    autoDeploy: false
    envVars:
      - key: ENVIRONMENT
        value: production
      - key: SECRET_KEY
        sync: false
      - key: ADMIN_PASSWORD
        sync: false
      - key: DB_PATH
        value: /data/ventas.db
      - key: SENTRY_DSN
        sync: false
      - key: CORS_ORIGINS
        value: https://www.pedidosfriosur.com,https://pedidosfriosur.com

  - type: web
    name: chorilocal-frontend
    env: docker
    region: oregon
    plan: hobby
    dockerfilePath: ./frontend/Dockerfile
    dockerContext: ./frontend
    # CRITICAL: Disable Render's auto-deploy to save money
    # Deploy manually only when needed
    autoDeploy: false
    envVars:
      - key: VITE_API_URL
        value: https://api.pedidosfriosur.com/api
