services:
  - type: web
    name: chorilocal-backend
    env: docker
    region: oregon
    plan: hobby
    dockerfilePath: ./backend/Dockerfile
    dockerContext: ./backend
    # Persistent disk for database storage
    disk:
      name: database
      mountPath: /data
      sizeGB: 1
    # Auto-deploy only on main/master branch (not every commit)
    autoDeploy: true
    branch: main
    envVars:
      - key: ENVIRONMENT
        value: production
      - key: SECRET_KEY
        sync: false
      - key: ADMIN_PASSWORD
        sync: false
      - key: DB_PATH
        value: /data/ventas.db
      - key: SENTRY_DSN
        sync: false
      - key: CORS_ORIGINS
        value: https://www.pedidosfriosur.com,https://pedidosfriosur.com

  - type: web
    name: chorilocal-frontend
    env: docker
    region: oregon
    plan: hobby
    dockerfilePath: ./frontend/Dockerfile
    dockerContext: ./frontend
    # Auto-deploy only on main/master branch
    autoDeploy: true
    branch: main
    envVars:
      - key: VITE_API_URL
        value: https://api.pedidosfriosur.com/api
